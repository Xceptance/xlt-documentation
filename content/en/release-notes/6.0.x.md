---
title: 6.0.x
linkTitle: 6.0.x

weight: 75
type: docs

date: 2021-02-09

description: >
    Java 11, Selenium 4, new logging framework.
---

## XLT 6.0.0

See <a href="https://github.com/Xceptance/XLT/milestone/8?closed=1" target="_blank">here</a> for the complete list of the changes made.

### Overview

Version 6 is a new major release of XLT. It comes with a bunch of new features, but also with a couple of breaking changes. But before we jump to the all the details, we want to say many thanks to OTTO for supporting us when making this release.

"This releases was supported by OTTO..." 

"Many thanks to OTTO for making this release possible"


#### Java 11 

Beginning with this release, XLT **requires Java 11** to run. This means you will need a JDK 11 (or later) on your development and load test machines.

#### Selenium 4 

After a while, the Selenium team has released a new version, Selenium 4.x. See their <a href="https://www.selenium.dev/blog/2021/announcing-selenium-4/" target="_blank">blog</a> to learn what is new in Selenium 4. **XLT now bundles Selenium 4**.

Although Selenium 4 is intended to be a drop-in replacement for most users, there might be things that need to be migrated. See the <a href="https://www.selenium.dev/documentation/webdriver/getting_started/upgrade_to_selenium_4/" target="_blank">migration guide</a> in the official Selenium documentation. Furthermore, some constructors of `XltChromeDriver` and `XltFirefoxDriver` that have been marked as deprecated for a while have eventually been removed.

#### Logging Framework Update

The previously used logging framework log4j 1.x has been replaced with **latest log4j 2.x**. log4j2 brings not only performance improvements, but is also not vulnerable to any known security issues.

With this upgrade XLT has been made completely agnostic to the underlying logging framework and XLT will now log through the logging facade <a href="https://www.slf4j.org/" target="_blank">SLF4J</a>. This also means that some features that had made direct use of the log4j API are not available any longer. See the following list of incompatible changes:

* The type of `XltLogger.runtimeLogger` has changed to `org.slf4j.Logger`.
* The `timers.csv` files, the data files where XLT stores its measurements to, do no longer roll-over to a new file at midnight. So there is always only a single `timers.csv` file for each virtual test user.
* When running test cases directly from your IDE, the logging framework is no longer auto-configured from file `<testsuite>/config/dev-log4j.properties`, but from a new file in the class path. See the migration guide below for details.
* The log4j2 configuration files require a slightly different property syntax.
* The Javascript debugger that logs the Javascript statements as they are being executed is not available at the moment.

#### Other Changes

The **documentation is no longer part of the XLT distribution** archive. Please refer to the [online version](https://xltdoc.xceptance.com/).

Credentials may be passed as part of the _user info_ in URLs, such as in `https://user:pass@host/`. In order to not reveal this sensitive information by mistake, XLT now makes substantial effort to **remove credentials from any URL** it records. This includes the data in the `timers.csv` files and also the result browser. This feature is enabled by default, but can be disabled as follows:

```
com.xceptance.xlt.results.data.request.removeUserInfoFromURL = true
```

### Migrating Your Test Suites

As outlined above, XLT 6.x comes with changes that may break your existing test suites. In order to migrate your test suites to XLT 6, you will need to perform the following steps.

#### Prepare for Java 11
Ensure the latest JDK 11 is installed on all your development and load test machines.

Now reconfigure your IDE to use Java 11 to compile and run your test cases. If your test suite comes with an Ant/Gradle/Maven build file, adjust that one to use Java 11 as well.

#### Update the logging framework configuration files
Copy `<xlt>/samples/testsuite-template/config/log4j2.properties` to the `config` folder of your test suite and adjust it to your needs. This file replaces the old `log4j.properties` and will be used when executing your test scenarios in a load test.

Now copy `<xlt>/samples/testsuite-template/src/log4j2-test.properties` to the sources of your test suite and adapt it as needed. This file replaces the old `dev-log4j.properties` and will be used when executing your test scenarios from your IDE during development and test. Make sure you place the file in a folder from which it will get automatically copied to the output folder when building the test suite with your IDE or your external build tool or otherwise log4j2 will not find it.

Let's assume your project is Maven-based. If it uses the standard Maven directory layout, copy the file to `src/main/resources` (if your test scenarios live in `src/main/java`) or to `src/test/resources` (if you prefer having your scenarios in `src/test/java`) and you should be all set. But maybe your project still uses a custom directory layout, such as `src` for the source code and `classes` as the output directory. In this case, you need to extend your `pom.xml` to tell Maven where your resources can be found and which of them should be copied:

```
<project>

	...

	<build>
		<sourceDirectory>src</sourceDirectory>
		<outputDirectory>classes</outputDirectory>

		<!-- tell Maven where resources can be found -->
		<resources>
			<resource>
				<directory>src</directory>
				<includes>
					<!-- ensure only properties resources are copied to the output directory -->
					<include>**/*.properties</include>
				</includes>
			</resource>
		</resources> 

		...

	</build>

	...

</project>
```

For non-Maven projects, make similar adjustments to get `log4j2-test.properties` copied to the class path.

Finally, delete the old log4j 1.x configuration files `config/log4j.properties` and `config/dev-log4j.properties`. They are not used any longer.

#### Fix compile errors
If there are still references to log4j 1.x in your code, replace them by SLF4J. In case your code uses Selenium classes that do not exists any longer in Selenium 4.x, rework your code for Selenium 4.x. If you made direct use of `XltChromeDriver` or `XltFirefoxDriver`, make sure you only use any of the current constructors (or builder methods).

#### Rebuild your test suite
Even if your source code is not affected by the API changes in XLT 6, completely rebuild your test suite. Otherwise you may encounter strange runtime errors later on.

#### Run your scenarios
Now it's time to check if everything works as expected. Start by running a test scenario from your IDE. It should run and finish with the expected result. Make sure the usual debug console output is visible as well. Use this opportunity to fine-tune the dev mode logger configuration if needed.

If that went well, perform a little load test. Again, check that the results are as expected and the agent log files contain the expected output.


### AWS AMI Retirement Notice

Xceptance provides machines images for Amazon's Elastic Compute Cloud with XLT installed and configured for use as load agents. As part of our regular clean-up process, we will **retire AWS AMIs older than XLT version 5.6.x on March, 1st 2022**. If you need an older version, please build your own AMI (see <a href="https://github.com/Xceptance/XLT-Packer" target="_blank">here</a> for more details) or copy the respective AMI to your own AMI registry in time.

As a notice for the future: Xceptance will not guarantee that provided AMIs (and, in the future, Docker images or images for other cloud providers) are available forever. We strongly encourage you to migrate to the most recent version. If you need a particular setup maintained for a longer period of time, please talk to Xceptance and consider a support contract.
